# NandinaUI v0.2 组件规范（MVP）

## 目标

在 `v0.2.0` 完成最小可用表单基础件，形成稳定 API 和主题映射模式，为后续布局与反馈组件提供复用基础。

## 范围（本阶段）

- 必做：`Button` `Input` `Label` `Switch` `Checkbox`
- 可选：`RadioGroup` `Textarea` `Slider`

## 通用设计约束

### 1) 统一状态机

每个可交互组件至少支持：

- `normal`
- `hovered`
- `pressed`
- `focused`
- `disabled`
- `entered`
- `exited`

输入类额外支持：

- `invalid`
- `success`

### 2) 统一属性命名

建议统一以下字段（按需实现）：

- `disabled: bool`
- `size: enum`（`sm` / `md` / `lg`）
- `variant: enum`（如 `default` / `secondary` / `ghost`）
- `focusVisible: bool`（只读可推导）

输入类补充：

- `text: string`
- `placeholderText: string`
- `invalid: bool`
- `errorText: string`
- `helperText: string`

### 3) 主题映射约定

优先使用 `ThemeManager.currentPaletteCollection` 语义色，不直接依赖具体 Catppuccin 色名：

- 背景：`backgroundPane` / `secondaryPane`
- 文本：`bodyCopy` / `mainHeadline` / `subHeadlines0`
- 边框：`activeBorder` / `inactiveBorder`
- 状态：`success` / `warning` / `error`
- 交互层：`overlay0` / `overlay1` / `overlay2`

## 组件最小 API 建议

## `Button`

### 属性

- `text: string`
- `disabled: bool`
- `variant: enum`（`default`,`outline`,`ghost`,`destructive`, `secondary`,`link`）
- `size: enum`（`sm`, `md`, `lg`）
- `leftIcon: Component?`（可选）
- `rightIcon: Component?`（可选）

### 信号

- `clicked()`
- `released()`

### 行为

- 支持鼠标点击与键盘 `Enter/Space`
- `disabled` 时禁止交互并降低视觉强调

## `Input`

### 属性

- `text: string`
- `placeholderText: string`
- `disabled: bool`
- `readOnly: bool`
- `invalid: bool`
- `errorText: string`
- `helperText: string`
- `maxLength: int`

### 信号

- `textChanged(string value)`
- `accepted()`

### 行为

- `invalid=true` 时边框和提示文本切换到错误语义色
- `accepted()` 对应回车提交

## `Label`

### 属性

- `text: string`
- `forControl: Item?`
- `disabled: bool`
- `required: bool`

### 行为

- 点击 `Label` 可将焦点转移至 `forControl`（可实现时）

## `Switch`

### 属性

- `checked: bool`
- `disabled: bool`

### 信号

- `toggled(bool checked)`

### 行为

- 支持 `Space` 切换
- 轨道与滑块颜色遵循主题语义

## `Checkbox`

### 属性

- `checked: bool`
- `partiallyChecked: bool`（可选）
- `disabled: bool`
- `text: string`

### 信号

- `toggled(bool checked)`

### 行为

- 支持键盘切换
- 可与 `Label` 一致对齐和间距

## 验收清单（v0.2.0）

- [ ] 必做组件具备统一状态命名与行为
- [ ] 组件在四套主题（Latte/Frappe/Macchiato/Mocha）下可用
- [ ] 所有交互组件支持键盘基本操作（Tab/Enter/Space）
- [ ] 输入组件支持错误态与提示文本
- [ ] 示例页提供最少一组表单 Demo（含校验态）

## 建议目录结构

```text
Nandina/
  Controls/
    CMakeLists.txt
    Button.qml
    Input.qml
    Label.qml
    Switch.qml
    Checkbox.qml
```

如需保证后续可扩展，可引入：

- `BaseControl.qml`：统一状态与 token 解析
- `FormField.qml`：统一 label/helper/error 布局
